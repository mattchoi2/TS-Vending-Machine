<!DOCTYPE html>

<html>
  <head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel="stylesheet" href="site.css">
    <title>Vending Machine</title>
  </head>
  <body>
    <div class="container">
      <h1>Vending Machine Simulation</h1>
      <div class="row">
        <div class="col-md-8">
          <div class="row" data-bind="foreach: cells">
            <div class="col-md-4 cell" data-bind="
              click: $parent.select,
              css: {
                selected: $parent.selectedCell().product == $data.product,
                sold: sold
              }"
            >
              <!-- ONLY add the CSS class "selected" if the $data (current cell in the foreach loop) product is equal to the VendingMachine class -->
              <div class="row">
                <div class="col-md-6 image">
                  <img class="soda-can" data-bind="attr: {src: product.category.ImageUrl,
                    alt: product.category.name }" />
                </div>
                <div class="col-md-6 productInfo">
                  <div data-bind="text: product.name"></div>
                  <h4 data-bind="text: stock"></h4>
                  <h3 data-bind="text: '$' + product.price"></h3>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <h4>
            Paid: $
            <span id="total" data-bind="text: Paid"></span>
            <br/><br/>
            <div data-bind="foreach: acceptedCoins">
              <img class="coin-img" data-bind="attr: {src: ImageUrl,
                alt: value}, click: $parent.acceptCoin" />
            </div>

            <h3 data-bind="with: selectedCell">
              <!-- This will update everytime selectedCell is updated -->
              <div data-bind="text: product.name">
                <div>
                  $
                  <span data-bind="text: product.price"></span>
                </div>
              </div>
            </h3>

            <button class="btn btn-primary payButton"
              data-bind="enable: canPay, click: pay">
              <!-- This will enable/disable the button depending on if you have enough $$$ -->
              Pay
            </button>

          </h4>
        </div>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.1/knockout-latest.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>